[{"filePath":"C:\\Users\\JOSHUA\\Downloads\\secure-deal-nigeria-main\\secure-deal-nigeria-main\\src\\components\\transaction\\CreateTransactionForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":122,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":125,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2568,2571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2568,2571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'feeConfig'. Either include it or remove the dependency array.","line":131,"column":6,"nodeType":"ArrayExpression","endLine":131,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [feeConfig]","fix":{"range":[4869,4871],"text":"[feeConfig]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8314,8317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8314,8317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":231,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8398,8401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8398,8401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { PRODUCT_TYPES, ProductType } from \"@/lib/constants\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Loader2, Package, Download, Briefcase, ArrowLeft, Info, MessageSquare,\n  Copy, CheckCheck, Share2, Mail, ExternalLink\n} from \"lucide-react\";\n\nconst productIcons = {\n  physical_product: Package,\n  digital_product: Download,\n  service: Briefcase,\n};\n\ninterface CreateTransactionFormProps {\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nconst SOCIAL_PLATFORMS = [\n  {\n    name: \"WhatsApp\",\n    color: \"bg-[#25D366] hover:bg-[#20b858] text-white\",\n    icon: \"≡ƒÆ¼\",\n    getUrl: (text: string) => `https://wa.me/?text=${encodeURIComponent(text)}`,\n  },\n  {\n    name: \"Telegram\",\n    color: \"bg-[#0088cc] hover:bg-[#007ab8] text-white\",\n    icon: \"Γ£ê∩╕Å\",\n    getUrl: (text: string, url: string) =>\n      `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`,\n  },\n  {\n    name: \"X (Twitter)\",\n    color: \"bg-black hover:bg-zinc-800 text-white\",\n    icon: \"≡¥òÅ\",\n    getUrl: (text: string, url: string) =>\n      `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`,\n  },\n  {\n    name: \"Facebook\",\n    color: \"bg-[#1877F2] hover:bg-[#166ad8] text-white\",\n    icon: \"≡ƒôÿ\",\n    getUrl: (_: string, url: string) =>\n      `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`,\n  },\n  {\n    name: \"Instagram\",\n    color: \"bg-gradient-to-r from-[#833ab4] via-[#fd1d1d] to-[#fcb045] text-white\",\n    icon: \"≡ƒô╕\",\n    getUrl: () => `https://www.instagram.com/`,\n  },\n  {\n    name: \"TikTok\",\n    color: \"bg-black hover:bg-zinc-800 text-white\",\n    icon: \"≡ƒÄ╡\",\n    getUrl: () => `https://www.tiktok.com/`,\n  },\n  {\n    name: \"Email\",\n    color: \"bg-slate-600 hover:bg-slate-700 text-white\",\n    icon: \"Γ£ë∩╕Å\",\n    getUrl: (text: string) =>\n      `mailto:?subject=You're invited as a seller on Escrow Africa&body=${encodeURIComponent(text)}`,\n  },\n] as const;\n\nexport function CreateTransactionForm({ onSuccess, onCancel, initialData }: CreateTransactionFormProps & { initialData?: any }) {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [feeConfig, setFeeConfig] = useState({ defaultPercent: 5, highValuePercent: 2, threshold: 10000 });\n  const [showNegotiate, setShowNegotiate] = useState(false);\n  const [negotiateMessage, setNegotiateMessage] = useState(\"\");\n  const [negotiateSending, setNegotiateSending] = useState(false);\n  const [generatedInviteUrl, setGeneratedInviteUrl] = useState<string | null>(null);\n  const [copied, setCopied] = useState(false);\n  const [dealTitle, setDealTitle] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    dealTitle: initialData?.deal_title || \"\",\n    dealDescription: initialData?.deal_description || \"\",\n    amount: initialData?.amount ? initialData.amount.toString() : \"\",\n    productType: (initialData?.product_type as ProductType) || \"\" as ProductType | \"\",\n  });\n\n  // Reverse-calculate base amount from total if editing\n  useEffect(() => {\n    if (initialData?.amount && feeConfig.defaultPercent) {\n      const total = initialData.amount;\n      let derivedBase = total / (1 + feeConfig.highValuePercent / 100);\n      if (derivedBase < feeConfig.threshold) {\n        derivedBase = total / (1 + feeConfig.defaultPercent / 100);\n      }\n      setFormData(prev => {\n        if (prev.amount === \"\" || prev.amount === initialData.amount.toString()) {\n          return { ...prev, amount: derivedBase.toFixed(2) };\n        }\n        return prev;\n      });\n    }\n  }, [initialData, feeConfig]);\n\n  // Load service fee settings from DB\n  useEffect(() => {\n    const fetchSettings = async () => {\n      const { data } = await supabase\n        .from(\"site_settings\")\n        .select(\"key, value\")\n        .in(\"key\", [\"service_fee_percent\", \"high_value_fee_percent\", \"high_value_threshold\"]);\n      if (data) {\n        const config = { ...feeConfig };\n        data.forEach((s) => {\n          if (s.key === \"service_fee_percent\") config.defaultPercent = parseFloat(s.value) || 5;\n          if (s.key === \"high_value_fee_percent\") config.highValuePercent = parseFloat(s.value) || 2;\n          if (s.key === \"high_value_threshold\") config.threshold = parseFloat(s.value) || 10000;\n        });\n        setFeeConfig(config);\n      }\n    };\n    fetchSettings();\n  }, []);\n\n  const baseAmount = parseFloat(formData.amount) || 0;\n  const activeFeePercent = baseAmount >= feeConfig.threshold ? feeConfig.highValuePercent : feeConfig.defaultPercent;\n  const serviceFee = Math.round(baseAmount * activeFeePercent) / 100;\n  const totalAmount = baseAmount + serviceFee;\n\n  const formatNaira = (n: number) =>\n    new Intl.NumberFormat(\"en-NG\", { style: \"currency\", currency: \"NGN\" }).format(n);\n\n  const handleNegotiate = async () => {\n    if (!negotiateMessage.trim() || !user) return;\n    setNegotiateSending(true);\n    try {\n      await supabase.functions.invoke(\"notify-transaction\", {\n        body: {\n          event_type: \"fee_negotiation\",\n          transaction: {\n            deal_title: formData.dealTitle.trim() || \"New Deal\",\n            amount: baseAmount,\n            buyer_email: user.email!,\n            negotiation_message: negotiateMessage.trim(),\n            service_fee: formatNaira(serviceFee),\n            total_amount: formatNaira(totalAmount),\n          },\n        },\n      });\n      toast({ title: \"Negotiation request sent!\", description: \"EA will contact you soon.\" });\n      setShowNegotiate(false);\n      setNegotiateMessage(\"\");\n    } catch {\n      toast({ title: \"Failed to send\", description: \"Try again or contact support.\", variant: \"destructive\" });\n    }\n    setNegotiateSending(false);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!user) {\n      toast({ title: \"Not authenticated\", description: \"Please log in.\", variant: \"destructive\" });\n      return;\n    }\n    if (baseAmount <= 0) {\n      toast({ title: \"Invalid amount\", description: \"Please enter a valid amount.\", variant: \"destructive\" });\n      return;\n    }\n    if (!formData.productType) {\n      toast({ title: \"Select product type\", description: \"Please select a product type.\", variant: \"destructive\" });\n      return;\n    }\n\n    setLoading(true);\n\n    const transactionData = {\n      deal_title: formData.dealTitle.trim(),\n      deal_description: formData.dealDescription.trim() || null,\n      amount: totalAmount,\n      product_type: formData.productType,\n      seller_email: \"\", // Will be updated when seller joins via invite link\n    };\n\n    let error;\n    let transactionId = initialData?.id;\n\n    if (initialData) {\n      // Editing: update existing transaction\n      const { data, error: updateError } = await supabase\n        .from(\"transactions\")\n        .update(transactionData)\n        .eq(\"id\", initialData.id)\n        .select()\n        .single();\n      error = updateError;\n      if (data) transactionId = data.id;\n    } else {\n      // Creating: insert new transaction\n      const { data, error: insertError } = await supabase\n        .from(\"transactions\")\n        .insert({\n          ...transactionData,\n          buyer_id: user.id,\n          buyer_email: user.email!,\n          status: \"pending_payment\",\n        })\n        .select()\n        .single();\n      error = insertError;\n      if (data) transactionId = data.id;\n\n      // Always auto-generate invite link for new transactions\n      if (!error && transactionId) {\n        const token = crypto.randomUUID().replace(/-/g, \"\");\n        const expiresAt = new Date(Date.now() + 72 * 60 * 60 * 1000).toISOString();\n        await supabase.from(\"invite_links\").insert({\n          transaction_id: transactionId,\n          token,\n          created_by: user.id,\n          expires_at: expiresAt,\n        } as any);\n        await supabase.from(\"transactions\").update({ invite_token: token } as any).eq(\"id\", transactionId);\n        const inviteUrl = `${window.location.origin}/invite/${token}`;\n        setGeneratedInviteUrl(inviteUrl);\n        setDealTitle(formData.dealTitle.trim());\n      }\n    }\n\n    if (error) {\n      toast({\n        title: initialData ? \"Failed to update\" : \"Failed to create\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    } else {\n      // Notify EA via email\n      supabase.functions.invoke(\"notify-transaction\", {\n        body: {\n          event_type: \"transaction_created\",\n          transaction: {\n            deal_title: formData.dealTitle.trim(),\n            amount: totalAmount,\n            buyer_email: user.email!,\n          },\n        },\n      }).catch((err) => console.warn(\"Email notification failed:\", err));\n\n      toast({\n        title: initialData ? \"Transaction updated!\" : \"Transaction created!\",\n        description: initialData ? \"Details updated.\" : \"Share the invite link with your seller.\",\n      });\n\n      if (initialData) onSuccess();\n      // For new transactions, wait for user to share before calling onSuccess\n    }\n\n    setLoading(false);\n  };\n\n  const getShareText = () =>\n    `You've been invited as a seller on Escrow Africa!\\n\\nTransaction: ${dealTitle}\\nAmount: ${formatNaira(baseAmount)}\\n\\nClick to accept the invite:\\n${generatedInviteUrl}`;\n\n  const handleCopy = async () => {\n    if (!generatedInviteUrl) return;\n    await navigator.clipboard.writeText(generatedInviteUrl);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // ΓöÇΓöÇΓöÇ Invite Link Share Screen ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\n  if (generatedInviteUrl) {\n    return (\n      <Card className=\"border-0 shadow-escrow-lg\">\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-xl bg-success/10 flex items-center justify-center\">\n              <CheckCheck className=\"h-5 w-5 text-success\" />\n            </div>\n            <div>\n              <CardTitle>Transaction Created!</CardTitle>\n              <CardDescription>Share the invite link with your seller to get started</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-5\">\n          {/* Amount summary */}\n          <div className=\"rounded-lg bg-primary/5 border border-primary/20 p-3 text-center\">\n            <p className=\"text-xs text-muted-foreground mb-0.5\">Transaction Amount</p>\n            <p className=\"text-xl font-bold text-primary\">{formatNaira(totalAmount)}</p>\n            <p className=\"text-xs text-muted-foreground mt-0.5\">{dealTitle}</p>\n          </div>\n\n          {/* Invite link box */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-semibold flex items-center gap-2\">\n              <Share2 className=\"h-4 w-4 text-primary\" />\n              Your Seller Invite Link\n            </Label>\n            <div className=\"flex gap-2\">\n              <Input value={generatedInviteUrl} readOnly className=\"text-xs font-mono bg-muted\" />\n              <Button\n                type=\"button\"\n                size=\"icon\"\n                variant=\"outline\"\n                onClick={handleCopy}\n                className=\"shrink-0\"\n              >\n                {copied ? <CheckCheck className=\"h-4 w-4 text-success\" /> : <Copy className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              ΓÅ│ This link expires in <strong>72 hours</strong>. Send it to your seller to get them started.\n            </p>\n          </div>\n\n          {/* Social share buttons */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-semibold\">Share via</Label>\n            <div className=\"grid grid-cols-2 gap-2 sm:grid-cols-3\">\n              {SOCIAL_PLATFORMS.map((platform) => (\n                <button\n                  key={platform.name}\n                  type=\"button\"\n                  onClick={() => {\n                    const url = platform.getUrl(getShareText(), generatedInviteUrl);\n                    window.open(url, \"_blank\");\n                  }}\n                  className={`flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-opacity hover:opacity-90 ${platform.color}`}\n                >\n                  <span className=\"text-base\">{platform.icon}</span>\n                  <span className=\"truncate\">{platform.name}</span>\n                  {platform.name === \"Instagram\" || platform.name === \"TikTok\" ? (\n                    <ExternalLink className=\"h-3 w-3 ml-auto opacity-70\" />\n                  ) : null}\n                </button>\n              ))}\n              {/* Generic share */}\n              {\"share\" in navigator ? (\n                <button\n                  type=\"button\"\n                  onClick={() =>\n                    navigator.share({\n                      title: \"Escrow Africa Invite\",\n                      text: getShareText(),\n                      url: generatedInviteUrl,\n                    })\n                  }\n                  className=\"flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium bg-muted hover:bg-muted/80 transition-colors col-span-2 sm:col-span-1\"\n                >\n                  <Share2 className=\"h-4 w-4\" />\n                  <span>More options</span>\n                </button>\n              ) : null}\n            </div>\n          </div>\n\n          {/* Done button */}\n          <div className=\"pt-2 border-t\">\n            <Button onClick={onSuccess} className=\"w-full gradient-hero border-0\">\n              Done ΓÇö Go to Dashboard\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // ΓöÇΓöÇΓöÇ Main Form ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\n  return (\n    <Card className=\"border-0 shadow-escrow-lg\">\n      <CardHeader>\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={onCancel}>\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <div>\n            <CardTitle>{initialData ? \"Edit Transaction\" : \"New Transaction\"}</CardTitle>\n            <CardDescription>\n              {initialData ? \"Update transaction details\" : \"Create a secure escrow transaction\"}\n            </CardDescription>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Product Type */}\n          <div className=\"space-y-3\">\n            <Label>Product Type</Label>\n            <div className=\"grid gap-3 grid-cols-1 sm:grid-cols-3\">\n              {(Object.entries(PRODUCT_TYPES) as [ProductType, typeof PRODUCT_TYPES[ProductType]][]).map(([key, value]) => {\n                const Icon = productIcons[key];\n                const isSelected = formData.productType === key;\n                return (\n                  <button\n                    key={key}\n                    type=\"button\"\n                    onClick={() => setFormData({ ...formData, productType: key })}\n                    className={`flex flex-col items-center gap-2 rounded-lg border-2 p-4 transition-all ${isSelected\n                      ? \"border-primary bg-primary/5\"\n                      : \"border-border hover:border-primary/50\"\n                      }`}\n                  >\n                    <Icon className={`h-6 w-6 ${isSelected ? \"text-primary\" : \"text-muted-foreground\"}`} />\n                    <span className={`text-sm font-medium ${isSelected ? \"text-primary\" : \"\"}`}>{value.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Transaction Title */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"dealTitle\">Transaction Title</Label>\n            <Input\n              id=\"dealTitle\"\n              placeholder=\"e.g., iPhone 15 Pro Max\"\n              value={formData.dealTitle}\n              onChange={(e) => setFormData({ ...formData, dealTitle: e.target.value })}\n              required\n              maxLength={100}\n            />\n          </div>\n\n          {/* Description */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"dealDescription\">Description (Optional)</Label>\n            <Textarea\n              id=\"dealDescription\"\n              placeholder=\"Describe the product or service details...\"\n              value={formData.dealDescription}\n              onChange={(e) => setFormData({ ...formData, dealDescription: e.target.value })}\n              rows={3}\n              maxLength={500}\n            />\n          </div>\n\n          {/* Amount */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"amount\">Product Price (NGN)</Label>\n            <div className=\"relative\">\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">Γéª</span>\n              <Input\n                id=\"amount\"\n                type=\"number\"\n                placeholder=\"0.00\"\n                value={formData.amount}\n                onChange={(e) => setFormData({ ...formData, amount: e.target.value })}\n                className=\"pl-8\"\n                min=\"100\"\n                step=\"0.01\"\n                required\n              />\n            </div>\n\n            {/* Fee breakdown */}\n            {baseAmount > 0 && (\n              <div className=\"rounded-lg border bg-muted/50 p-3 space-y-1.5\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">Product price</span>\n                  <span>{formatNaira(baseAmount)}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground flex items-center gap-1\">\n                    <Info className=\"h-3 w-3\" />\n                    Service fee ({activeFeePercent}%)\n                  </span>\n                  <span>{formatNaira(serviceFee)}</span>\n                </div>\n                <div className=\"border-t pt-1.5 flex items-center justify-between font-semibold\">\n                  <span>Total you'll pay</span>\n                  <span className=\"text-primary\">{formatNaira(totalAmount)}</span>\n                </div>\n\n                {/* Negotiate */}\n                <div className=\"pt-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowNegotiate(!showNegotiate)}\n                    className=\"inline-flex items-center gap-1.5 text-xs text-primary hover:underline\"\n                  >\n                    <MessageSquare className=\"h-3 w-3\" />\n                    Negotiate service fee?\n                  </button>\n\n                  {showNegotiate && (\n                    <div className=\"mt-2 space-y-2 rounded-lg border p-3 bg-card\">\n                      <p className=\"text-xs text-muted-foreground\">\n                        For large transactions, you can negotiate the service fee with our EA.\n                      </p>\n                      <Textarea\n                        placeholder=\"Explain your transaction and preferred fee...\"\n                        value={negotiateMessage}\n                        onChange={(e) => setNegotiateMessage(e.target.value)}\n                        rows={3}\n                        className=\"text-sm\"\n                      />\n                      <Button\n                        type=\"button\"\n                        size=\"sm\"\n                        disabled={negotiateSending || !negotiateMessage.trim()}\n                        onClick={handleNegotiate}\n                        className=\"w-full gradient-hero border-0\"\n                      >\n                        {negotiateSending ? (\n                          <Loader2 className=\"mr-1 h-3 w-3 animate-spin\" />\n                        ) : (\n                          <MessageSquare className=\"mr-1 h-3 w-3\" />\n                        )}\n                        Send to EA\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Info banner */}\n          {!initialData && (\n            <div className=\"rounded-lg border border-primary/20 bg-primary/5 p-4\">\n              <div className=\"flex items-start gap-3\">\n                <Mail className=\"h-4 w-4 text-primary mt-0.5 shrink-0\" />\n                <div>\n                  <p className=\"text-sm font-medium text-primary\">Invite link will be auto-generated</p>\n                  <p className=\"text-xs text-muted-foreground mt-0.5\">\n                    After creating this transaction, you'll get a shareable link to send to your seller via WhatsApp, Telegram, Email, and more.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"flex gap-3 pt-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={onCancel} className=\"flex-1\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" className=\"flex-1 gradient-hero border-0\" disabled={loading}>\n              {loading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n              {initialData ? \"Update Transaction\" : \"Create Transaction\"}{\" \"}\n              {baseAmount > 0 ? `(${formatNaira(totalAmount)})` : \"\"}\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]}]
